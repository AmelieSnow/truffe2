{% extends "generic/generic/list.html" %}
{% load i18n %}

{% block content %}
    {{block.super}}
    <script type="text/javascript">
        $(function() {
            setTimeout(add_copy_button, 500);
            setTimeout(add_copy_button, 1000);
            setTimeout(add_copy_button, 2000);
        });

        function add_copy_button() {
            $('tbody tr').each(function(index, element) {
                if (!$(element).find('td:last a:nth-child(2) i').hasClass('fa-copy')) {
                    var pk = $(element).find('td:first input').attr('pk');
                    copy_button = " <a data-original-title=\"{% trans "Copier" %}\" href=\"{% url "accounting_core.views.copy_accounting_year" 987654321 %}\" class=\"btn btn-xs btn-default\" title=\"\" rel=\"tooltip\" multido_action=\"window.location = '{% url "accounting_core.views.copy_accounting_year" 9999429999 %}';\" multido_pkreplace=\"9999429999\" multido_button=\"<a href='#' class='btn btn-default'><i class='fa fa-copy'></i> {% trans "Copier" %}</a>\"><i class=\"fa fa-copy\"></i></a> ".replace(987654321, pk);
                    $(element).find('td:last a:first').after(copy_button);
                }
            });
        }
    </script>
{% endblock %}
