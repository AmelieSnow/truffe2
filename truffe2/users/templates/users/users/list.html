
{% extends "base.html" %}
{% load i18n %}

{% block title %}{{block.super}} :: {% trans "Utilisateurs" %} :: {% trans "Profil" %}}{% endblock %}

{% block ribbon %}
    {{block.super}}
    <li><i class="fa fa-group"></i> {% trans "Annuaire global" %}</li>
  {% endblock %}

{% block content %}
    <h1>{% trans "Liste de toutes les personnes" %}</h1>

    <section id="widget-grid" class="">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
                {% with w_title="Liste" w_nopadding=True %}{% include "widget/header.html" %}{% endwith %}
                    <div class="widget-body-toolbar"></div>
                    <table id="main_list_table" class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>{% trans "Sciper" %}</th>
                                    <th>{% trans "Nom" %}</th>
                                    <th>{% trans "Pr√©nom" %}</th>
                                    <th>{% trans "Roles" %}</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                          </table>

                      <hr style="clear: both; visibility: hidden;">


                {% include "widget/footer.html" %}
            </div>
        </div>
    </section>

    {% with id="main_list_table" json_url="users.views.users_list_json" %}{% include "datatables.html" %}{% endwith %}
    <script type="text/javascript">
            function post_process_data_main_list_table(data) {
                new_data = [];
                $(data.aaData).each(function(__, val) {

                    val[0] = '<a href="' + '{% url "users.views.users_profile" "~" %}'.replace('~', val[4]) + '">' + val[0] + '</a>';

                    {% if user.is_superuser %}
                      val[4] = '<a class="btn btn-xs btn-default" href="' + '{% url "users.views.users_edit" "~" %}'.replace('~', val[4]) + '"><i class="fa fa-pencil"></i> {% trans "Editer" %}</a>';
                    {% else %}
                        val[4] = '';
                    {% endif %}
                    new_data.push(val);
                    });
                data.aaData = new_data;
                return data;
            }
    </script>
{% endblock %}
